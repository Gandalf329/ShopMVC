@model ShopMVC.Models.Product
@{
    ViewData["Title"] = "All Messages";
}
@if (User.IsInRole("admin"))
    {
<a asp-action="CreateProduct">New product</a>
    }
<h1>All Products</h1>
<p>@Model.Category1  / @Model.Category2</p>
<div class="text-center">
    <table class="table">
        <tr>
            <td>Name</td>
            @if (Model.Photo != null)
            {
                <td>Photo</td>
            }
            <td>Company</td>
            <td>Category</td>
            <td>Description</td>
            <td>Amount</td>
        </tr>

        <tr>
            <td>@Model.Name</td>
            @if (Model.Photo != null)
            {
                <td><img class="miniImg" src="data:image/jpeg;base64,@(Convert.ToBase64String(Model.Photo))" /></td>
            }
            <td>@Model.Company</td>
            <td><a asp-controller="Home" asp-action="Categories" asp-route-nameCategory="@Model.Category2">@Model.Category2 </a></td>
            <td>@Model.Description</td>
            <td>@Model.Amount</td>
            @if (User.IsInRole("admin"))
            {
            <td>
                <form method="post" asp-controller="Home" asp-action="BuyTest" asp-route-id="@Model.Id">
                    <input type="submit" value="Buy Test" />
                </form>
            </td>
            <td>
                <a class="editButton" asp-controller="Home" asp-action="EditProduct" asp-route-id="@Model.Id">Edit</a>
            </td>
            <td>
                <a class="deleteButton" asp-controller="Home" asp-action="Delete" asp-route-id="@Model.Id">Delete</a>
            </td>
            }
            <td>
                <a class="buyButton" asp-controller="Home" asp-action="BuyProduct">Buy</a>
            </td>
        </tr>

    </table>
</div>